<div class=" w-full md:max-w-4xl mx-auto p-2 ">

  @if (!hasToken) {
    <div class="flex flex-col items-center justify-center min-h-[40vh] md:min-h-[80vh] gap-4">
      <input
        type="text"
        placeholder="Token here"
        [(ngModel)]="token"
        class="input input-bordered input-success w-full md:w-2/5"
      />
      <button class="btn btn-success" (click)="submitToken()">提交</button>
    </div>
  } @else {
    <div class="grid grid-cols-2 md:grid-cols-2 gap-4 mb-6">
      <div class="stat place-items-center bg-base-200 rounded-xl shadow-md">
        <div class="stat-title text-sm md:text-base">审核通过</div>
        <div class="stat-value text-success text-lg md:text-2xl">{{ passedNum }}</div>
      </div>
      <div class="stat place-items-center bg-base-200 rounded-xl shadow-md">
        <div class="stat-title text-sm md:text-base">待审核</div>
        <div class="stat-value text-error text-lg md:text-2xl">{{ waitingNum }}</div>
      </div>
    </div>

    <app-card
      (reviewed)="onReviewed($event)"
      *ngFor="let sub of waitingList; let i = index;"
      [nextID]="i + 1 < waitingList.length ? waitingList[i + 1].id : ''"
      [review]="true"
      [submission]="sub"
      class="w-full mb-4"
    />

    <div class="card bg-base-100 shadow-xl mt-5 mx-auto max-w-4xl mb-20">
      <figure class="p-4">
        <img src="assets/welcome.webp" class="rounded-xl w-full object-cover" alt="Welcome Image"/>
      </figure>
      <div class="card-body text-center">
        <div class="text-lg font-semibold mb-4">🤖 ~没有更多了~ 🤖</div>
        <div class="flex flex-wrap justify-center gap-2">
          <button (click)="batchAccept()" class="btn btn-success btn-outline">AC</button>
          <button (click)="batchReject()" class="btn btn-warning btn-outline">NA</button>
          <button (click)="removeToken()" class="btn btn-error btn-outline">清除 token</button>
        </div>
      </div>
    </div>
  }

  <!-- Modal (放在整个 conditional 之外) -->
  <input class="modal-toggle" id="message" type="checkbox"/>
  <div class="modal">
    <div class="modal-box text-center">
      <h3 class="font-bold text-lg">{{ title }}</h3>
      <p class="py-4">{{ message }}</p>
      <div class="modal-action justify-center">
        <label class="btn btn-success btn-sm" for="message">Yay!</label>
      </div>
    </div>
  </div>
</div>
